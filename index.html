<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Era Birthday Quest</title>
  <style>
    :root{
      --bg:#0f172a; --card:#0b1220; --text:#f8fafc;
      --glass: rgba(255,255,255,0.04);
      --accent:#ff758f;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    body{margin:0; min-height:100vh; background:linear-gradient(180deg,#071020 0%, #0b1530 100%); color:var(--text); display:flex; align-items:center; justify-content:center; padding:32px}
    .app{width:980px; max-width:96vw; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.08)); border-radius:14px; padding:22px; box-shadow:0 8px 30px rgba(2,6,23,0.7);}
    header{display:flex; align-items:center; gap:16px}
    h1{margin:0; font-size:22px}
    .subtitle{color:rgba(255,255,255,0.7); font-size:13px}

    .era-grid{display:grid; grid-template-columns:repeat(3,1fr); gap:12px; margin-top:18px}
    .era-card{background:var(--glass); border-radius:12px; padding:14px; cursor:pointer; transition:transform .18s ease, box-shadow .18s ease; border:1px solid rgba(255,255,255,0.03)}
    .era-card:hover{transform:translateY(-6px); box-shadow:0 8px 24px rgba(0,0,0,0.5)}
    .era-title{font-weight:700; font-size:16px}
    .era-desc{font-size:13px; color:rgba(255,255,255,0.8)}

    .play-area{margin-top:18px; display:flex; gap:16px}
    .panel{flex:1; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:14px; border-radius:10px; min-height:320px}

    .hud{display:flex; gap:10px; align-items:center; justify-content:space-between}
    .progress{height:12px; background:rgba(255,255,255,0.06); border-radius:999px; overflow:hidden}
    .progress > i{display:block; height:100%; width:0%; background:linear-gradient(90deg,var(--accent), #ffd1e0)}

    .items-area{display:flex; flex-wrap:wrap; gap:10px; margin-top:12px}
    .item{width:88px; height:88px; border-radius:10px; display:flex; align-items:center; justify-content:center; font-size:32px; cursor:pointer; user-select:none; transition:transform .12s ease; background:rgba(255,255,255,0.02); border:1px solid rgba(255,255,255,0.03)}
    .item:hover{transform:translateY(-6px)}

    .controls{display:flex; gap:8px; margin-top:12px}
    button{background:transparent; border:1px solid rgba(255,255,255,0.06); padding:8px 12px; border-radius:8px; color:var(--text); cursor:pointer}
    button.primary{background:linear-gradient(90deg,var(--accent), #ffd1e0); color:#1a1a1a; border:none}

    .hidden{display:none}

    /* final screen */
    .final-screen{display:flex; flex-direction:column; align-items:center; justify-content:center; gap:14px; text-align:center}
    .big-heart{font-size:96px; animation:pop .9s ease forwards}
    @keyframes pop{0%{transform:scale(.2); opacity:0}70%{transform:scale(1.12); opacity:1}100%{transform:scale(1);}}

    .confetti-canvas{position:fixed; left:0; top:0; width:100%; height:100%; pointer-events:none}

    footer{margin-top:14px; color:rgba(255,255,255,0.6); font-size:13px}

    /* responsive */
    @media (max-width:860px){.era-grid{grid-template-columns:repeat(2,1fr)} }
    @media (max-width:560px){.era-grid{grid-template-columns:repeat(1,1fr)} .play-area{flex-direction:column}}
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div>
        <h1>Era Birthday Quest</h1>
        <div class="subtitle">Click through the eras, collect items, and unlock your birthday surprise.</div>
      </div>
      <div style="margin-left:auto; text-align:right">
        <div style="font-weight:700">For: <span id="recipientName">Her</span></div>
        <div style="font-size:12px; color:rgba(255,255,255,0.7)">Completed: <span id="completedCount">0</span>/<span id="eraCount">0</span> eras</div>
      </div>
    </header>

    <div class="era-grid" id="eraGrid"></div>

    <div class="play-area">
      <div class="panel" id="leftPanel">
        <div class="hud">
          <div>
            <div style="font-weight:700" id="currentEraTitle">Select an era to begin</div>
            <div style="font-size:13px; color:rgba(255,255,255,0.7)" id="currentEraDesc">Each era has a set of items to collect. Click them to progress.</div>
          </div>
          <div style="width:48%">
            <div style="font-size:12px; color:rgba(255,255,255,0.7)">Progress</div>
            <div class="progress"><i id="progBar"></i></div>
          </div>
        </div>

        <div class="items-area" id="itemsArea">
          <div style="color:rgba(255,255,255,0.5); width:100%">Pick an era from above to start collecting.</div>
        </div>

        <div class="controls">
          <button id="resetBtn">Reset Era</button>
          <button id="randomBtn">Surprise Era</button>
          <button class="primary" id="giveUpBtn">Reveal Surprise</button>
        </div>
      </div>

      <div class="panel" id="rightPanel">
        <div id="sideContent">
          <h3 style="margin:8px 0 6px 0">Your Journey</h3>
          <div id="collectedList" style="font-size:14px; color:rgba(255,255,255,0.9)">No items collected yet.</div>
        </div>

        <div id="finalReveal" class="hidden" style="margin-top:20px">
          <div class="final-screen">
            <div class="big-heart">ðŸ’–</div>
            <h2 id="finalMessageTitle">Happy Birthday!</h2>
            <p id="finalMessageText" style="max-width:420px; color:rgba(255,255,255,0.9)"></p>
            <button class="primary" id="restartBtn">Play Again</button>
          </div>
        </div>
      </div>
    </div>

    <footer>Tip: customize the recipient name and final message inside <code>script</code> to personalize.</footer>
  </div>

  <canvas class="confetti-canvas" id="confetti"></canvas>

  <script>
    /***************************
     * CONFIG â€” edit these to customize
     ***************************/
    const recipient = {
      name: "Your Love",
    };

    // The final message displayed in the reveal. Keep it short or use simple HTML.
    const finalMessage = `Happy Birthday, my star âœ¨<br/>I'm so proud of you â€” your voice, your laugh, your stage. Love you more than all the eras.`;

    // Era definitions: name, palette, emoji items
    const ERAS = [
      {id:'lover', title:'Lover', desc:'Pastel hearts and glitter', color:'#ff9fb1', items:['ðŸ’–','ðŸŒˆ','ðŸŽ€']},
      {id:'fearless', title:'Fearless', desc:'Golden romance & sparkles', color:'#ffd27f', items:['âœ¨','ðŸŽ¤','ðŸŒŸ']},
      {id:'red', title:'Red', desc:'Scarves, passion & poetry', color:'#d33f49', items:['ðŸ§£','ðŸ’Œ','ðŸ·']},
      {id:'nineteen', title:'1989', desc:'Retro synths & city lights', color:'#9bd3ff', items:['ðŸ“¸','ðŸ•¶ï¸','ðŸŽ§']},
      {id:'folklore', title:'Folklore', desc:'Cozy woods & stories', color:'#c7dcb6', items:['ðŸ‚','ðŸ“œ','ðŸªµ']},
      {id:'midnights', title:'Midnights', desc:'Sparkly nights & secrets', color:'#7a6cff', items:['ðŸŒŒ','ðŸ•°ï¸','ðŸŒ™']}
    ];

    /***************************
     * END CONFIG
     ***************************/

    // small app state
    const state = {
      currentEra: null,
      collected: {}, // eraId -> Set of items
      completed: new Set()
    };

    // DOM refs
    const eraGrid = document.getElementById('eraGrid');
    const itemsArea = document.getElementById('itemsArea');
    const currentEraTitle = document.getElementById('currentEraTitle');
    const currentEraDesc = document.getElementById('currentEraDesc');
    const progBar = document.getElementById('progBar');
    const collectedList = document.getElementById('collectedList');
    const recipientName = document.getElementById('recipientName');
    const completedCount = document.getElementById('completedCount');
    const eraCount = document.getElementById('eraCount');
    const finalReveal = document.getElementById('finalReveal');
    const finalMessageText = document.getElementById('finalMessageText');
    const finalMessageTitle = document.getElementById('finalMessageTitle');

    recipientName.textContent = recipient.name;
    eraCount.textContent = ERAS.length;

    // build era cards
    ERAS.forEach((era)=>{
      const card = document.createElement('div');
      card.className = 'era-card';
      card.innerHTML = `<div class="era-title">${era.title}</div><div class="era-desc">${era.desc}</div>`;
      card.style.borderLeft = `6px solid ${era.color}`;
      card.addEventListener('click', ()=>selectEra(era.id));
      eraGrid.appendChild(card);
    });

    function selectEra(id){
      const era = ERAS.find(e=>e.id===id);
      state.currentEra = era;
      if(!state.collected[era.id]) state.collected[era.id] = new Set();
      currentEraTitle.textContent = era.title;
      currentEraDesc.textContent = era.desc;
      renderItems(era);
      updateHUD();
    }

    function renderItems(era){
      itemsArea.innerHTML = '';
      era.items.forEach((it)=>{
        const div = document.createElement('div');
        div.className = 'item';
        div.textContent = it;
        if(state.collected[era.id] && state.collected[era.id].has(it)){
          div.style.opacity = '0.4'; div.style.transform='scale(.96)';
        }
        div.addEventListener('click', ()=>collectItem(era, it, div));
        itemsArea.appendChild(div);
      });
    }

    function collectItem(era, item, el){
      if(!state.collected[era.id]) state.collected[era.id] = new Set();
      if(state.collected[era.id].has(item)) return; // already
      state.collected[era.id].add(item);
      // little pop animation
      el.animate([{transform:'scale(1.06)'},{transform:'scale(1)'}],{duration:220, easing:'ease-out'});
      el.style.opacity = '0.4'; el.style.transform='scale(.96)';
      updateHUD();

      // if collected all items for era, mark completed
      if(state.collected[era.id].size === era.items.length){
        state.completed.add(era.id);
        completedCount.textContent = state.completed.size;
        // little confetti burst
        confettiBurst(12, era.color || getComputedStyle(document.documentElement).getPropertyValue('--accent'));
      }

      // auto-reveal if all eras finished
      if(state.completed.size === ERAS.length){
        showFinalReveal();
      }
    }

    function updateHUD(){
      const era = state.currentEra;
      if(!era){ progBar.style.width = '0%'; collectedList.innerHTML = 'No items collected yet.'; return; }
      const have = state.collected[era.id] ? state.collected[era.id].size : 0;
      const total = era.items.length;
      const pct = Math.round((have/total)*100);
      progBar.style.width = pct + '%';

      // collected list
      const pairs = Object.entries(state.collected).filter(([k,s])=>s.size>0);
      if(pairs.length===0) collectedList.innerHTML = 'No items collected yet.';
      else{
        collectedList.innerHTML = pairs.map(([k,s])=>{
          const eraName = ERAS.find(e=>e.id===k).title;
          return `<div style=\"margin-bottom:6px\"><strong>${eraName}</strong>: ${Array.from(s).join(' ')}</div>`;
        }).join('');
      }
    }

    // controls
    document.getElementById('resetBtn').addEventListener('click', ()=>{
      if(!state.currentEra) return; state.collected[state.currentEra.id] = new Set(); state.completed.delete(state.currentEra.id); updateHUD(); renderItems(state.currentEra);
    });
    document.getElementById('randomBtn').addEventListener('click', ()=>{
      const choice = ERAS[Math.floor(Math.random()*ERAS.length)]; selectEra(choice.id);
    });
    document.getElementById('giveUpBtn').addEventListener('click', ()=>{
      showFinalReveal();
    });
    document.getElementById('restartBtn').addEventListener('click', ()=>{
      // clear state
      state.currentEra = null; state.collected = {}; state.completed = new Set(); finalReveal.classList.add('hidden'); document.getElementById('rightPanel').querySelector('#sideContent').classList.remove('hidden'); currentEraTitle.textContent='Select an era to begin'; currentEraDesc.textContent='Each era has a set of items to collect. Click them to progress.'; itemsArea.innerHTML = '<div style="color:rgba(255,255,255,0.5); width:100%">Pick an era from above to start collecting.</div>'; progBar.style.width='0%'; completedCount.textContent = '0';
    });

    function showFinalReveal(){
      // put final message
      finalMessageText.innerHTML = finalMessage;
      finalMessageTitle.textContent = `Happy Birthday, ${recipient.name}!`;
      // hide side content
      document.getElementById('rightPanel').querySelector('#sideContent').classList.add('hidden');
      finalReveal.classList.remove('hidden');
      // big confetti
      confettiBurst(160);
    }

    /***********************
     * Confetti (lightweight)
     ***********************/
    const confettiCanvas = document.getElementById('confetti');
    confettiCanvas.width = window.innerWidth; confettiCanvas.height = window.innerHeight;
    const ctx = confettiCanvas.getContext('2d');
    let confettiParticles = [];

    function confettiBurst(amount=60, colorHint){
      const colors = ['#ff7aa2','#ffd2e0','#ffe29f','#b9e3ff','#c7dcb6','#9bd3ff'];
      for(let i=0;i<amount;i++){
        confettiParticles.push({
          x: Math.random()*confettiCanvas.width,
          y: Math.random()*confettiCanvas.height*0.2,
          vx: (Math.random()-0.5)*6,
          vy: Math.random()*6+2,
          size: Math.random()*6+4,
          color: colorHint || colors[Math.floor(Math.random()*colors.length)],
          rot: Math.random()*360,
          life: 80 + Math.random()*40
        });
      }
      if(!confettiLoopRunning) runConfettiLoop();
    }

    let confettiLoopRunning = false;
    function runConfettiLoop(){
      confettiLoopRunning = true;
      const loop = ()=>{
        ctx.clearRect(0,0,confettiCanvas.width, confettiCanvas.height);
        confettiParticles.forEach((p)=>{
          ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.rot*Math.PI/180);
          ctx.fillStyle = p.color; ctx.fillRect(-p.size/2, -p.size/2, p.size, p.size*0.6);
          ctx.restore();
          p.x += p.vx; p.y += p.vy; p.vy += 0.15; p.rot += 6; p.life--; 
        });
        confettiParticles = confettiParticles.filter(p=>p.life>0 && p.y < confettiCanvas.height+50);
        if(confettiParticles.length>0) requestAnimationFrame(loop); else confettiLoopRunning=false;
      };
      requestAnimationFrame(loop);
    }

    // convenience: resize confetti canvas
    window.addEventListener('resize', ()=>{ confettiCanvas.width = window.innerWidth; confettiCanvas.height = window.innerHeight; });

    // initial random era to seed UI
    selectEra(ERAS[0].id);
    updateHUD();

    // ---------------------
    // For you: how to customize
    // ---------------------
    // - Change recipient.name above
    // - Edit 'finalMessage' to whatever you want (supports <br/>)
    // - Add/remove ERAS items or change colors to match specific album art
    // - Replace emoji items with small images by changing the .item element innerHTML
    // - To host: save this file as index.html and open in browser, or drop into any static host (GitHub Pages, Netlify)
  </script>
</body>
</html>
